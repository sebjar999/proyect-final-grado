<ion-header class="ion-no-border" [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button color="medium" (click)="setOpen(false)" defaultHref="/definir"></ion-back-button>
        </ion-buttons>
        <ion-title class="ion-text-capitalize"> Rutas</ion-title>

    </ion-toolbar>
</ion-header>
<ion-content>

    <ion-content id="rutaTrazada"></ion-content>

    <ion-modal #modal trigger="open-modal" [isOpen]="true" [initialBreakpoint]="0.1" [breakpoints]="[0.1, 1, 0.75]"
        [backdropDismiss]="false" [backdropBreakpoint]="0.2">
        <ng-template>
            <ion-accordion-group>
                <!-- one level  -->
                <ion-accordion value="first">
                    <ion-item slot="header" color="light">
                        <ion-label>Nivel bajo </ion-label>
                    </ion-item>
                    <div class="ion-padding" slot="content">
                        <div class="rutasFilterOne--grid" style="text-align: center;">
                            <div class="col-4 mb-6" *ngFor="let rut of rutasFilterOne">
                                <ion-item (click)="trazarRutaMaps(rut.start_route, rut.end_route)">
                                    <ion-avatar slot="start">
                                        <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                                    </ion-avatar>
                                    <ion-label>

                                        <p>Inicio: {{rut.start_route}}</p>
                                        <p>Fin: {{rut.end_route}}</p>
                                        <p>Nivel: {{rut.route_level}}</p>
                                        <p>Fecha: {{rut.date_route}}</p>

                                    </ion-label>
                                    <ion-button color="dark" id="btn1{{rut.id}}" (click)="asistir(rut.id)"><ion-icon
                                            name="paper-plane-outline"></ion-icon></ion-button>
                                </ion-item>
                            </div>
                        </div>
                    </div>

                </ion-accordion>

                <!-- second level -->
                <ion-accordion value="second">
                    <ion-item slot="header" color="light">
                        <ion-label>Nivel medio </ion-label>
                    </ion-item>
                    <div class="ion-padding" slot="content">
                        <div class="rutasFilterTwo--grid" style="text-align: center;">
                            <div class="col-4 mb-6" *ngFor="let rut of rutasFilterTwo">
                                <ion-item (click)="trazarRutaMaps(rut.start_route, rut.end_route)">
                                    <ion-avatar slot="start">
                                        <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                                    </ion-avatar>
                                    <ion-label>

                                        <p>Inicio: {{rut.start_route}}</p>
                                        <p>Fin: {{rut.end_route}}</p>
                                        <p>Nivel: {{rut.route_level}}</p>
                                        <p>Fecha: {{rut.date_route}}</p>

                                    </ion-label>
                                    <ion-button color="dark" id="btn1{{rut.id}}" (click)="asistir(rut.id)"><ion-icon
                                            name="paper-plane-outline"></ion-icon></ion-button>
                                </ion-item>
                            </div>
                        </div>
                    </div>


                </ion-accordion>

                <!-- third level-->
                <ion-accordion value="third">
                    <ion-item slot="header" color="light">
                        <ion-label>Nivel alto</ion-label>
                    </ion-item>
                    <div class="ion-padding" slot="content">
                        <div class="rutasFilterThree--grid" style="text-align: center;">
                            <div class="col-4 mb-6" *ngFor="let rut of rutasFilterThree">
                                <ion-item (click)="trazarRutaMaps(rut.start_route, rut.end_route)">
                                    <ion-avatar slot="start">
                                        <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                                    </ion-avatar>
                                    <ion-label>

                                        <p>Inicio: {{rut.start_route}}</p>
                                        <p>Fin: {{rut.end_route}}</p>
                                        <p>Nivel: {{rut.route_level}}</p>
                                        <p>Fecha: {{rut.date_route}}</p>

                                    </ion-label>
                                    <ion-button color="dark" id="btn1{{rut.id}}" (click)="asistir(rut.id)"><ion-icon
                                            name="paper-plane-outline"></ion-icon></ion-button>
                                </ion-item>
                            </div>
                        </div>
                    </div>

                </ion-accordion>

                <!-- search date  -->
                <ion-accordion value="fourd">
                    <ion-item slot="header" color="light">
                        <ion-label>Busqueda por fecha</ion-label>
                    </ion-item>

                    <div class="ion-padding" slot="content">
                        <ion-col size="6">
                            <!-- Inicio -->
                            <ion-title>Desde</ion-title>
                            <ion-datetime-button datetime="datetime"></ion-datetime-button>
                            <ion-modal [keepContentsMounted]="true">
                                <ng-template>
                                    <ion-datetime id="datetime" color="dark"
                                        [(ngModel)]="fechaSeleccionadainicio"></ion-datetime>
                                </ng-template>
                            </ion-modal>
                            <!-- Fin -->
                            <ion-title>Hasta</ion-title>
                            <ion-datetime-button datetime="datetime1"></ion-datetime-button>
                            <ion-modal [keepContentsMounted]="true">
                                <ng-template>
                                    <ion-datetime id="datetime1" color="dark"
                                    [(ngModel)]="fechaSeleccionadaFin"></ion-datetime>
                                </ng-template>
                            </ion-modal>
                            <ion-button color="dark" expand="block" (click)="filtrarPorFecha()">Filtrar</ion-button>

                        </ion-col>
                        

                        <div class="since--grid" style="text-align: center;">
                            <div class="col-4 mb-6" *ngFor="let rut of since">
                                <ion-item (click)="trazarRutaMaps(rut.start_route, rut.end_route)">
                                    <ion-avatar slot="start">
                                        <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                                    </ion-avatar>
                                    <ion-label>

                                        <p>Inicio: {{rut.start_route}}</p>
                                        <p>Fin: {{rut.end_route}}</p>
                                        <p>Nivel: {{rut.route_level}}</p>
                                        <p>Fecha: {{rut.date_route}}</p>

                                    </ion-label>
                                    <ion-button color="dark" id="btn1{{rut.id}}" (click)="asistir(rut.id)"><ion-icon
                                            name="paper-plane-outline"></ion-icon></ion-button>
                                </ion-item>
                            </div>
                        </div>
                    </div>

                </ion-accordion>

            </ion-accordion-group>

            <ion-content class="ion-padding">
                <ion-header>Todas las rutas </ion-header>
                <ion-list>
                    

                    <div class="rutas--grid" style="text-align: center;">
                        <div class="col-4 mb-6" *ngFor="let rut of rutas">

                            <ion-item (click)="trazarRutaMaps(rut.start_route, rut.end_route)">
                                <ion-avatar slot="start">
                                    <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                                </ion-avatar>
                                <ion-label>

                                    <p>Inicio: {{rut.start_route}}</p>
                                    <p>Fin: {{rut.end_route}}</p>
                                    <p>Nivel: {{rut.route_level}}</p>
                                    <p>Fecha: {{rut.date_route}}</p>

                                </ion-label>
                                <ion-button color="dark" id="btn1{{rut.id}}" (click)="asistir(rut.id)"><ion-icon
                                        name="paper-plane-outline"></ion-icon></ion-button>
                            </ion-item>
                        </div>
                    </div>
                </ion-list>

            </ion-content>
        </ng-template>

    </ion-modal>

</ion-content>